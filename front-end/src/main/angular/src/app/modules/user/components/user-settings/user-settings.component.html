<div fxLayout fxLayoutAlign="center center">

  <form (submit)="save(form)" #form="ngForm" style="display: grid">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Settings</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <mat-form-field>
          <input matInput placeholder="Email" [(ngModel)]="user.name" type="text" name="name" required email
                 minlength="4"
                 #username="ngModel">
        </mat-form-field>
        <app-validations [field]="'Username'" [control]="username"></app-validations>

        <mat-form-field>
          <input matInput placeholder="First Name" [(ngModel)]="user.firstName" type="text" name="firstName">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Last Name" [(ngModel)]="user.lastName" type="text" name="lastName">
        </mat-form-field>

        <mat-accordion>
          <mat-expansion-panel (opened)="changePassword = true" (closed)="changePassword = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Change Password
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="changePassword">
              <mat-form-field>
                <input matInput placeholder="Current Password" [(ngModel)]="user.password" type="password" name="password"
                       required #password="ngModel">
              </mat-form-field>
              <app-validations [field]="'Current Password'" [control]="password"></app-validations>

              <mat-form-field>
                <input matInput placeholder="New Password" [(ngModel)]="user.newPassword" type="password" name="newPassword"
                       required #newPassword="ngModel">
              </mat-form-field>
              <app-validations [field]="'New Password'" [control]="newPassword"></app-validations>

              <mat-form-field>
                <input matInput placeholder="Confirm Password" [(ngModel)]="user.passwordConfirmation" type="password"
                       name="password" required minlength="5" #passwordConfirmation="ngModel">
              </mat-form-field>
              <app-validations [field]="'New Password'" [control]="passwordConfirmation"></app-validations>
            </div>

          </mat-expansion-panel>
        </mat-accordion>

      </mat-card-content>

      <mat-card-actions fxLayout fxLayoutAlign="center">
        <button mat-raised-button type="submit" color="primary">Save</button>
      </mat-card-actions>
    </mat-card>
  </form>

</div>
